# Simple BJFront Docker Management

# ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ
IMAGE_NAME = bjfront
CONTAINER_NAME = bjfront-app
DEV_CONTAINER = bjfront-dev
PROD_PORT = 3000
DEV_PORT = 5173

.PHONY: build build-dev rebuild run stop

build: ## Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½ Ð¾Ð±Ñ€Ð°Ð·
	@echo "ðŸ”¨ Ð¡Ð±Ð¾Ñ€ÐºÐ° Ð¿Ñ€Ð¾Ð´Ð°ÐºÑˆÐµÐ½ Ð¾Ð±Ñ€Ð°Ð·Ð°..."
	docker build -t $(IMAGE_NAME) .

build-dev: ## Ð¡Ð¾Ð±Ñ€Ð°Ñ‚ÑŒ dev Ð¾Ð±Ñ€Ð°Ð·
	@echo "ðŸ”¨ Ð¡Ð±Ð¾Ñ€ÐºÐ° dev Ð¾Ð±Ñ€Ð°Ð·Ð°..."
	docker build -f Dockerfile.dev -t $(IMAGE_NAME)-dev .

rebuild: stop build run ## ÐŸÐµÑ€ÐµÑÐ¾Ð±Ñ€Ð°Ñ‚ÑŒ Ð¸ Ð¿ÐµÑ€ÐµÐ·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ

run: ## Ð—Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€
	@echo "ðŸš€ Ð—Ð°Ð¿ÑƒÑÐº ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð°..."
	docker run -d -p $(PROD_PORT):$(PROD_PORT) --name $(CONTAINER_NAME) $(IMAGE_NAME)
	@echo "âœ… ÐŸÑ€Ð¸Ð»Ð¾Ð¶ÐµÐ½Ð¸Ðµ Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð½Ð¾: http://localhost:$(PROD_PORT)"

stop: ## ÐžÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ñ‹
	@echo "â¹ï¸ ÐžÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° ÐºÐ¾Ð½Ñ‚ÐµÐ¹Ð½ÐµÑ€Ð¾Ð²..."
	@docker stop $(CONTAINER_NAME) $(DEV_CONTAINER) 2>/dev/null || true
	@docker rm $(CONTAINER_NAME) $(DEV_CONTAINER) 2>/dev/null || true 